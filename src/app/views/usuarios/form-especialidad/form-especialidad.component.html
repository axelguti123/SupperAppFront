<app-mostrar-errores [errores]="errores"></app-mostrar-errores>
<a (click)="toggleCollapse(0)" cButton class="me-1" color="primary"
  >Agregar Especialidad</a
>
<c-row>
  <c-col [xs]="9">
    <div [visible]="visible[0]" cCollapse>
      <c-card class="mt-3">
        <c-card-body>
          <form
            cForm
            (submit)="guardarCambios()"
            [formGroup]="form"
            class="mb-2"
          >
            <div [cFormFloating]="true" class="mb-3">
              <input
                cFormControl
                formControlName="nombreEspecialidad"
                placeholder="Comunicaciones"
              />
              <label cLabel for="especialidad">Especialidad</label>
            </div>
            <button
              [disabled]="form.invalid"
              cButton
              color="success"
              variant="outline"
              type="submit"
            >
              Guardar
            </button>
          </form>
          
          <div class="row">
            <div class="col-1">
            </div>
            <form [formGroup]="forms">
              <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-bordered w-100">
                <thead>
                  <tr class="bg-success text-white">
                    <th>NÂº</th>
                    <th>Especialidad</th>
                  </tr>
                </thead>
                <tbody formArrayName="list">
                  <tr
                    *ngFor="let especialidad of list.controls; let i = index; trackByFn"
                    (keydown.enter)="onRowUpdate(user)"
                  >
                    <td>{{ i + 1 }}</td>
                    <td (dblclick)="onEdit(i,'nombreEspecialidad')">
                      <ng-container *ngIf="!isEdit(i, 'nombreEspecialidad'); else editMode">
                        {{ especialidad.get('nombreEspecialidad').value}}
                      </ng-container>
                      <ng-template #editMode>
                        <input
                          type="text"
                          formControlName="nombreEspecialidad"
                        />
                        <div class="text-danger" *ngIf="validateField(user.nombreEspecialidad)">
                          <span> Required </span>
                        </div>
                      </ng-template>
                    </td>
                    <td>
                      <app-button
                        buttonText="Delete"
                        [data]="especialidad.get('idEspecialidad').value"
                        
                      />
                    </td>
                  </tr>
                </tbody>
              </table>
            </form>
          </div>          
        </c-card-body>
      </c-card>
    </div>
  </c-col>
</c-row>
