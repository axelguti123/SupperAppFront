<div class="row">
  <div class="col-1"></div>
  <div class="container-fluid">
    <form [formGroup]="partidaForm">
      <table
        datatable
        [dtOptions]="dtOptions"
        [dtTrigger]="dtTrigger"
        class="table table-bordered hover w-100"
      >
        <thead>
          <tr class="bg-success text-white">
            <th>Nro</th>
            <!--<th>Especialidad</th>-->
            <th>item</th>
            <th>Partida</th>
            <th>Und</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody formArrayName="partidas">
          <tr
            *ngFor="let partida of partidas.controls; let i = index"
            (keydown.enter)="onRowUpdate(i)"
            [formGroupName]="i"
          >
            <td>{{ i + 1 }}</td>
            <td  (dblclick)="onEdit(i,'codPartida')">
              <ng-container *ngIf="!isEdit(i,'codPartida'); else editItem">
                {{ partida.get('codPartida').value }}
              </ng-container>
              <ng-template #editItem>
                <textarea class="edit-input" formControlName="codPartida"></textarea>
              </ng-template>
            </td>
            <td (dblclick)="onEdit(i,'partida')">
              <ng-container *ngIf="!isEdit(i,'partida'); else editPartida">
                {{ partida.get('partida').value}}
              </ng-container>
              <ng-template #editPartida>
                <input type="text" class="edit-input" formControlName="partida"/>
              </ng-template>
            </td>
            <td (dblclick)="onEdit(i,'und')">
              <ng-container *ngIf="!isEdit(i,'und'); else editUnd">
                {{ partida.get('und').value }}
              </ng-container>
              <ng-template #editUnd>
                <input type="text" class="edit-input" formControlName="und" />
              </ng-template>
            </td>
            <td (dblclick)="onEdit(i,'total')">
              <ng-container *ngIf="!isEdit(i,'total'); else editTotal">
                {{ partida.get('total').value}}
              </ng-container>
              <ng-template #editTotal>
                <input type="text" class="edit-input" formControlName="total"/>
              </ng-template>
            </td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
</div>
